# 前端性能优化之（图片篇）

## 前言
`HTTP Archieve`有个统计，图片内容已经占到了互联网内容总量的62%，也就是说超过一半的流量和时间都用来下载图片。​从性能优化的角度看，图片也绝对是优化重点和热点之一。

> 图片优化既是一门艺术，也是一门科学，图片优化是一门艺术，是因为单个图片的压缩不存在最好的特定性方案，而图片优化之所以是一门科学，是因为许多开发得很出色的方法和算法可以明显减小图片的大小。要找到图片的最优设置，需要按照许多维度进行认真分析：格式能力、编码数据内容、像素尺寸等。


## 针对业务场景选择图片格式

### 1. JPEG/JPG
- **特点**：有损压缩、体积小、不支持透明、在压缩率不高时保留的细节还不错。
- **使用场景**：颜色丰富的照片，`JPG`是通用的选择，如大的背景图、轮播图或`Banner`图。


### 2. PNG
- **特点**:无损压缩、质量高、体积大、支持透明。
- **使用场景**：透明图片的业务场景，如小的`Logo`、颜色简单且对比强烈的图片或背景。

### 3. SVG
- **特点**： 文本文件、体积小、不失真、兼容性好、无需多端、多分辨率适配、较强的交互特性、渲染成本比较高。
- **使用场景**：图片色彩相对简单的业务场景。


### 4. Base64 
- **特点**：文本文件、依赖编码，`Base64`编码后，图片大小会膨胀为原文件的`4/3`。
- **使用场景**：小图标（<8KB）解决方案。

### 5. WebP

> 打开淘宝网，假如你是`chrome`浏览器，你会发现，所有图片都是`webp`结尾的，淘宝网图片运用了`webp`。假如你是`safari`浏览器，看到图片就是`jpg`或者`png`了，淘宝网自动判断浏览器支持不支持`webp`，假如支持，则输出相应的图片格式！

- **特点**：`WebP`图片是一种新的图像格式，由`Google`开发。与`png`、`jpg`相比，相同的视觉体验下，`WebP`图像的尺寸缩小了大约30％。另外，`WebP`图像格式还支持有损压缩、无损压缩、透明和动画，但有兼容性问题。
- **使用场景**：图片占较大的商场类网站，目前`Google`、`Facebook`、`ebay`、淘宝、腾讯、美团等已经在用。


## 图片在线转换工具推荐

在前端工程化的今天，不会让你手动转换图片，下面几款工具可以测试玩一玩。

- 智图：https://zhitu.isux.us（推荐）
- 雪碧图样式生成： http://www.spritecow.com/（推荐）
- Chrome 插件：Save image as Type （推荐），WebP Highlighter
- 改图宝：https://www.gaitubao.com/jpg-gif-png
- CloudConvert：https://cloudconvert.com/jpeg-to-webp
- converter：https://www.office-converter.com/JPEG-to-JPG
- squoosh：https://squoosh.app （谷歌出品，github）

## 总结

- 根据具体的业务场景来选择不同图片格式。
- 减少网站的http请求数量，如：雪碧图（`pc`端用的比较多，如`facebook`）、`Image inline`（`Base64`或`SVG`）。
- 图片压缩。
- WebP + 兼容性处理。


## 看完两件事

1. 点个「**在看**」，让更多的人也能看到这篇内容。
2. 关注公众号「**字节前端**」，持续推送优质好文。


![](https://imgkr.cn-bj.ufileos.com/920f418a-87bc-40de-8f35-2d607f8090eb.png)

- 回复「**加群**」进技术大咖群交流学习
- 回复「**资料**」免费领取优质学习资料


